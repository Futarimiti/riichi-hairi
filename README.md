# Japanese Mahjong Theory

日麻牌理分析器

用来练手Rust的项目。

## 重要更新日志

##### Ver 1.05 2020/3/1

* 实现少量命令行启动参数和交互式命令。
* 实现json输出模式，以作为后端使用。
* 支持三麻。
* 修复8z9z不报错的问题。

##### Ver 1.0 2020/2/26

* 基本解决BUG，大量牌谱分析结果均与天凤牌理一致。

##### Ver 0.91 2020/2/25

* 第一个能够算得上是程序的版本。
* 完成基本的牌理功能，支持任意3*k+2的输入。

## 编译

没什么好说的，会Rust都知道`cargo build --release`就完事了。

## 使用

打开程序后输入牌谱即可，按照约定俗称的缩写：

* `m`->万子
* `p`->饼子
* `s`->索子
* `z`->字牌

作为扩展，允许使用`[]`表示副露的牌，这些牌的数量会从听牌数中减掉。

#### 输入样例

* 比较标准的形式：`1m2m3m5m9m9m2p2p4s5s1z[5z5z5z]`
* 省略多余的标记：`123599m22p45s1z[555z]`
* 空格将会被无视：`123599m 22p 45s 1z [555z]`
* 3*k+2不包含副露，可以加入杠：`123599m 22p 45s 1z [5555z]`
* 输入顺序可以随便：`99m2p [5555z] 1z12m 2p45s35m`

#### 命令行启动参数

注意：本列表只适用于master的最新版本，而不是release的最新版本。

* `-V`,`--version` 打印版本信息
* `-h`,`--help` 打印启动参数列表
* `-i`,`--interactive` 以交互模式启动（暂未实现）
* `-f=type`,`--format=type` 设置输出模式，现支持standard（标准模式，默认）和json（用于后端模式）。
* `-p=num`,`--player=num` 设置游戏人数为4（四麻，默认）或3（三麻），三麻缺少2~8万。

#### 交互式命令

注意：本列表只适用于master的最新版本，而不是release的最新版本。

* `i`,`interactive` 进入交互模式（未实现）。如果已经处于交互模式，则重新初始化。
* `ni`,`noninteractive` 退出交互模式，回到普通模式。
* `3pl`,`4pl` 切换四麻或三麻。交互模式下会重新初始化。
* `s`,`status` 仅在交互模式下可用，打印游戏状态，包含牌山，舍牌种类，手牌。
* `q`,`quit`,`exit` 退出程序。

## TODO

* 增加交互式功能
* 增加后端模式
